<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Nine-Stack Solitaire · 9 Suits · 4 Tiers · Carbon to Crystalline | SING 9</title>
  <meta name="description" content="Solitaire with 9 suits and 4 tier foundations. Build from Carbon through Silver, Gold, to Crystalline. 81 cards, 9 tableau columns, solo mode."/>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#080810 0%,#0f0e1e 100%);color:#e8e8e8;min-height:100vh;padding:1.25rem 1rem;}
    .wrap{max-width:1100px;margin:0 auto;}
    .top-links{margin-bottom:0.85rem;font-size:0.82rem;}
    .top-links a{color:#00d4ff;text-decoration:none;margin-right:0.75rem;}
    h1{font-size:clamp(1.1rem,3vw,1.6rem);color:#d4af37;font-weight:800;margin-bottom:0.2rem;}
    .sub{font-size:0.8rem;color:#64748b;margin-bottom:1rem;}

    /* TOP BAR */
    .top-bar{display:flex;gap:0.75rem;align-items:flex-start;margin-bottom:1.25rem;flex-wrap:wrap;}

    /* DRAW PILE */
    .draw-pile{flex-shrink:0;}
    .draw-pile-card,.waste-card{
      width:62px;height:88px;border-radius:8px;border:2px solid;
      display:flex;align-items:center;justify-content:center;
      cursor:pointer;font-size:1.5rem;flex-direction:column;gap:2px;
      transition:transform 0.1s,box-shadow 0.1s;
      position:relative;
    }
    .draw-pile-card{background:rgba(212,175,55,0.1);border-color:rgba(212,175,55,0.4);color:#d4af37;}
    .draw-pile-card:hover{transform:scale(1.04);box-shadow:0 4px 16px rgba(212,175,55,0.2);}
    .draw-pile-card.empty{opacity:0.3;cursor:default;}
    .waste-card{border-color:rgba(255,255,255,0.15);}
    .waste-card.empty{background:rgba(255,255,255,0.02);border-color:rgba(255,255,255,0.08);color:rgba(255,255,255,0.15);cursor:default;}
    .dc-sym{font-size:1.4rem;line-height:1;}
    .dc-rank{font-size:0.6rem;letter-spacing:0.05em;}
    .dc-count{font-size:0.58rem;color:#64748b;margin-top:1px;}

    /* TIER FOUNDATIONS */
    .foundations{flex:1;display:grid;grid-template-columns:repeat(2,1fr);gap:0.5rem;min-width:280px;}
    @media(max-width:500px){.foundations{grid-template-columns:1fr;}}
    .tier-group{border-radius:8px;padding:0.5rem;border:1px solid;}
    .tier-label{font-size:0.6rem;letter-spacing:0.15em;text-transform:uppercase;margin-bottom:0.35rem;font-weight:700;}
    .tier-slots{display:flex;gap:0.35rem;flex-wrap:wrap;}
    .found-slot{
      width:42px;height:60px;border-radius:6px;border:1.5px dashed;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      font-size:0.9rem;position:relative;cursor:pointer;transition:border-color 0.15s;
      flex-shrink:0;
    }
    .found-slot:hover{border-style:solid;}
    .found-slot .fs-sym{font-size:1rem;line-height:1;}
    .found-slot .fs-rank{font-size:0.55rem;margin-top:1px;opacity:0.7;}
    .found-slot.has-card .fs-sym{opacity:1;}

    /* STATUS BAR */
    .status-bar{display:flex;gap:1rem;align-items:center;flex-wrap:wrap;margin-bottom:0.85rem;font-size:0.8rem;}
    .sb-item{display:flex;align-items:center;gap:0.35rem;}
    .sb-label{color:#475569;font-size:0.72rem;letter-spacing:0.05em;}
    .sb-val{font-weight:700;}
    .ctrl-btn{padding:0.3rem 0.75rem;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:#cbd5e1;font-size:0.75rem;cursor:pointer;transition:background 0.15s;margin-left:auto;}
    .ctrl-btn:hover{background:rgba(255,255,255,0.1);}
    .status-msg{color:#d4af37;font-size:0.82rem;font-weight:600;}

    /* TABLEAU */
    .tableau{display:flex;gap:0.5rem;align-items:flex-start;overflow-x:auto;padding-bottom:2rem;}
    .column{flex-shrink:0;width:62px;position:relative;min-height:100px;}
    .col-header{font-size:0.6rem;text-align:center;letter-spacing:0.08em;text-transform:uppercase;margin-bottom:0.35rem;height:1rem;}
    .col-cards{position:relative;min-height:88px;}
    .card{
      width:62px;height:88px;border-radius:8px;border:2px solid;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      cursor:pointer;position:absolute;left:0;
      transition:transform 0.1s,box-shadow 0.1s;
      user-select:none;
    }
    .card:hover{z-index:100;}
    .card.selected{z-index:200;box-shadow:0 0 0 3px rgba(212,175,55,0.8),0 4px 16px rgba(0,0,0,0.5);}
    .card.face-down{background:rgba(20,20,40,0.7);border-color:rgba(212,175,55,0.15);cursor:default;}
    .card.face-down::after{content:'✦';font-size:1.2rem;color:rgba(212,175,55,0.15);}
    .card .c-sym{font-size:1.2rem;line-height:1;}
    .card .c-rank{font-size:0.62rem;font-weight:700;margin-top:2px;}
    .card .c-name{font-size:0.52rem;opacity:0.6;margin-top:1px;}
    .card.valid-drop{outline:2px dashed rgba(0,212,80,0.6);outline-offset:2px;}
    .empty-col{width:62px;height:88px;border-radius:8px;border:1.5px dashed rgba(255,255,255,0.08);display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,0.1);font-size:1.2rem;}

    /* WIN OVERLAY */
    .win-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:1000;align-items:center;justify-content:center;flex-direction:column;gap:1rem;text-align:center;padding:2rem;}
    .win-overlay.show{display:flex;animation:fadeIn 0.4s ease;}
    @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
    .win-overlay h2{font-size:2.5rem;font-weight:900;background:linear-gradient(135deg,#d4af37,#a8e6f0,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
    .win-overlay p{color:#94a3b8;font-size:1rem;max-width:40ch;line-height:1.6;}
    .win-btn{padding:0.75rem 2rem;background:rgba(212,175,55,0.2);border:2px solid rgba(212,175,55,0.6);border-radius:20px;color:#fef3c7;font-size:1rem;font-weight:700;cursor:pointer;}

    .foot{margin-top:2rem;font-size:0.75rem;color:#475569;text-align:center;}
    .foot a{color:#d4af37;text-decoration:none;}
  </style>
</head>
<body>
<div class="wrap">
  <div class="top-links">
    <a href="nine-game-hub.html">← The Nine Game</a>
    <a href="four-layer-chess.html">Four-Layer Chess</a>
    <a href="my-whiteboard.html">Whiteboard</a>
  </div>
  <h1>Nine-Stack Solitaire</h1>
  <p class="sub">9 suits · 81 cards · 4 tiers (Carbon → Silver → Gold → Crystalline) · Solo mode · Build all foundations to win</p>

  <!-- TOP BAR -->
  <div class="top-bar">
    <!-- Draw + Waste -->
    <div class="draw-pile" style="display:flex;gap:0.4rem;flex-direction:column;">
      <div style="display:flex;gap:0.4rem;">
        <div id="drawPile" class="draw-pile-card" onclick="drawCard()" title="Draw a card">
          <div class="dc-sym">✦</div>
          <div class="dc-count" id="drawCount">81</div>
        </div>
        <div id="wastePile" class="waste-card empty" onclick="selectWaste()"></div>
      </div>
      <div style="font-size:0.6rem;color:#475569;text-align:center;">Draw pile → Waste</div>
    </div>
    <!-- Foundations -->
    <div class="foundations" id="foundations"></div>
  </div>

  <!-- STATUS BAR -->
  <div class="status-bar">
    <div class="sb-item"><span class="sb-label">Moves:</span><span class="sb-val" id="moveCount">0</span></div>
    <div class="sb-item"><span class="sb-label">Cards placed:</span><span class="sb-val" id="placedCount">0</span></div>
    <div class="sb-item"><span class="status-msg" id="statusMsg"></span></div>
    <button class="ctrl-btn" onclick="newGame()">New Game</button>
    <button class="ctrl-btn" onclick="undoAction()">Undo</button>
  </div>

  <!-- TABLEAU -->
  <div class="tableau" id="tableau"></div>

  <p class="foot">
    <a href="nine-game-hub.html">← Hub</a> ·
    <a href="four-layer-chess.html">Four-Layer Chess →</a> ·
    NSPFRNP → ∞⁹
  </p>
</div>

<!-- WIN OVERLAY -->
<div class="win-overlay" id="winOverlay">
  <div style="font-size:3rem;">✦ ∞ ♥</div>
  <h2>Crystalline Achieved</h2>
  <p>All 81 cards ascended through Carbon · Silver · Gold · Crystalline. You brought the whole group through. Singularity 9. → ∞⁹</p>
  <button class="win-btn" onclick="newGame()">Play Again</button>
</div>

<script>
// ── SUITS ─────────────────────────────────────────────────────────
const SUITS = [
  {id:'hearts',   sym:'♥',  name:'Hearts',   color:'#d4af37', bg:'rgba(212,175,55,0.1)',   border:'rgba(212,175,55,0.5)',   tier:'gold'},
  {id:'crystals', sym:'✦',  name:'Crystals', color:'#a8e6f0', bg:'rgba(168,230,240,0.08)', border:'rgba(168,230,240,0.4)',  tier:'crystalline'},
  {id:'carbons',  sym:'◈',  name:'Carbons',  color:'#c4a265', bg:'rgba(196,162,101,0.1)',  border:'rgba(196,162,101,0.45)',tier:'carbon'},
  {id:'nodes',    sym:'⬡',  name:'Nodes',    color:'#c0c0c0', bg:'rgba(192,192,192,0.08)', border:'rgba(192,192,192,0.4)', tier:'silver'},
  {id:'sols',     sym:'☀',  name:'Sols',     color:'#ff8c00', bg:'rgba(255,140,0,0.08)',   border:'rgba(255,140,0,0.4)',   tier:'gold'},
  {id:'seeds',    sym:'◎',  name:'Seeds',    color:'#4ade80', bg:'rgba(74,222,128,0.07)',  border:'rgba(74,222,128,0.35)', tier:'carbon'},
  {id:'edges',    sym:'∞',  name:'Edges',    color:'#8b5cf6', bg:'rgba(139,92,246,0.08)',  border:'rgba(139,92,246,0.4)',  tier:'crystalline'},
  {id:'waves',    sym:'≋',  name:'Waves',    color:'#06b6d4', bg:'rgba(6,182,212,0.07)',   border:'rgba(6,182,212,0.4)',   tier:'silver'},
  {id:'holograms',sym:'✧',  name:'Holograms',color:'#e879f9', bg:'rgba(232,121,249,0.08)', border:'rgba(232,121,249,0.4)', tier:'crystalline'},
];

const RANKS = ['Pulse','Flow','Threes','Gate','Fractal','Singularity','Vibe','Baller','SING'];

// Tier definitions
const TIERS = [
  {id:'carbon',      name:'Carbon',      sym:'◈', color:'#c4a265', border:'rgba(196,162,101,0.3)', bg:'rgba(196,162,101,0.06)', ranks:[1,2]},
  {id:'silver',      name:'Silver',      sym:'⬡', color:'#c0c0c0', border:'rgba(192,192,192,0.25)', bg:'rgba(192,192,192,0.04)', ranks:[3,4]},
  {id:'gold',        name:'Gold',        sym:'♥', color:'#d4af37', border:'rgba(212,175,55,0.3)',  bg:'rgba(212,175,55,0.05)', ranks:[5,6]},
  {id:'crystalline', name:'Crystalline', sym:'✦', color:'#a8e6f0', border:'rgba(168,230,240,0.3)', bg:'rgba(168,230,240,0.05)', ranks:[7,8,9]},
];

// "Material" suits (1-4) alternate with "Operator" suits (5-9) for tableau stacking
function suitType(suitId) {
  const idx = SUITS.findIndex(s=>s.id===suitId);
  return idx < 4 ? 'material' : 'operator';
}

// ── STATE ─────────────────────────────────────────────────────────
let drawPile, wastePile, foundations, tableau, selected, moveCount, historyStack;
// foundations[suitId] = array of cards placed (built from rank 1 up)
// tableau[col] = array of {suit, rank, faceUp}
// selected = {type:'waste'} | {type:'tableau', col, cardIdx}

function buildDeck() {
  const deck = [];
  SUITS.forEach(s => {
    for(let r=1;r<=9;r++) deck.push({suit:s.id, rank:r});
  });
  // Shuffle
  for(let i=deck.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[deck[i],deck[j]]=[deck[j],deck[i]];}
  return deck;
}

function newGame() {
  const deck = buildDeck();
  tableau = [];
  let idx = 0;
  for(let col=0;col<9;col++){
    const cards = [];
    for(let i=0;i<=col;i++){
      cards.push({...deck[idx], faceUp: i===col});
      idx++;
    }
    tableau.push(cards);
  }
  drawPile = deck.slice(idx);
  wastePile = [];
  foundations = {};
  SUITS.forEach(s => { foundations[s.id] = []; });
  selected = null;
  moveCount = 0;
  historyStack = [];
  document.getElementById('statusMsg').textContent = '';
  document.getElementById('winOverlay').classList.remove('show');
  render();
}

// ── DRAW ──────────────────────────────────────────────────────────
function drawCard() {
  if(drawPile.length===0){
    if(wastePile.length===0) return;
    // Reset
    saveHistory();
    drawPile = [...wastePile].reverse();
    wastePile = [];
    render(); return;
  }
  saveHistory();
  const card = drawPile.pop();
  card.faceUp = true;
  wastePile.push(card);
  selected = null;
  moveCount++;
  render();
}

function selectWaste() {
  if(wastePile.length===0) return;
  selected = selected?.type==='waste' ? null : {type:'waste'};
  render();
}

// ── FOUNDATIONS ───────────────────────────────────────────────────
function canPlaceOnFoundation(card, suitId) {
  const f = foundations[suitId];
  if(card.suit !== suitId) return false;
  return card.rank === f.length + 1;
}

function placeOnFoundation(suitId) {
  if(!selected) return;
  let card;
  if(selected.type==='waste') {
    if(wastePile.length===0) return;
    card = wastePile[wastePile.length-1];
  } else if(selected.type==='tableau') {
    const col = tableau[selected.col];
    // Can only move top card to foundation
    if(selected.cardIdx !== col.length-1) return;
    card = col[selected.cardIdx];
  }
  if(!card || !canPlaceOnFoundation(card, suitId)) {
    document.getElementById('statusMsg').textContent = 'Cannot place there.';
    return;
  }
  saveHistory();
  if(selected.type==='waste') wastePile.pop();
  else { tableau[selected.col].splice(selected.cardIdx,1); flipTop(selected.col); }
  foundations[suitId].push(card);
  selected = null;
  moveCount++;
  checkWin();
  render();
}

// ── TABLEAU ───────────────────────────────────────────────────────
function canStackOnTableau(movingCard, targetCard) {
  if(!targetCard) return true; // empty column accepts any card
  // Descending rank
  if(movingCard.rank !== targetCard.rank - 1) return false;
  // Alternating suit type (material ↔ operator)
  return suitType(movingCard.suit) !== suitType(targetCard.suit);
}

function handleColumnClick(col, cardIdx) {
  const colCards = tableau[col];
  if(cardIdx < colCards.length && !colCards[cardIdx].faceUp) {
    // Flip top card
    if(cardIdx === colCards.length-1) {
      saveHistory();
      colCards[cardIdx].faceUp = true;
      render();
    }
    return;
  }

  if(!selected) {
    if(cardIdx < colCards.length && colCards[cardIdx].faceUp) {
      selected = {type:'tableau', col, cardIdx};
      render();
    }
    return;
  }

  // Try to move selected → this column
  const targetTopCard = colCards.length > 0 ? colCards[colCards.length-1] : null;

  if(selected.type==='waste') {
    const card = wastePile[wastePile.length-1];
    if(canStackOnTableau(card, targetTopCard)) {
      saveHistory();
      wastePile.pop();
      tableau[col].push({...card, faceUp:true});
      selected = null; moveCount++;
      render(); return;
    }
  } else if(selected.type==='tableau') {
    if(selected.col===col) { selected=null; render(); return; }
    const movingCards = tableau[selected.col].slice(selected.cardIdx);
    const bottomMoving = movingCards[0];
    if(canStackOnTableau(bottomMoving, targetTopCard)) {
      saveHistory();
      movingCards.forEach(c => tableau[col].push({...c, faceUp:true}));
      tableau[selected.col].splice(selected.cardIdx, movingCards.length);
      flipTop(selected.col);
      selected = null; moveCount++;
      render(); return;
    }
  }

  // Clicked another card — re-select
  if(cardIdx < colCards.length && colCards[cardIdx].faceUp) {
    selected = {type:'tableau', col, cardIdx};
  } else {
    selected = null;
  }
  render();
}

function flipTop(col) {
  const c = tableau[col];
  if(c.length>0 && !c[c.length-1].faceUp) c[c.length-1].faceUp=true;
}

// ── AUTO-PLACE ────────────────────────────────────────────────────
function autoPlace() {
  let placed = false;
  // Try waste
  if(wastePile.length>0) {
    const card = wastePile[wastePile.length-1];
    if(canPlaceOnFoundation(card, card.suit)) {
      saveHistory();
      foundations[card.suit].push(wastePile.pop());
      placed=true; moveCount++;
    }
  }
  // Try tableau tops
  for(let col=0;col<9;col++) {
    const c = tableau[col];
    if(c.length>0) {
      const card = c[c.length-1];
      if(card.faceUp && canPlaceOnFoundation(card, card.suit)) {
        saveHistory();
        foundations[card.suit].push(c.pop());
        flipTop(col);
        placed=true; moveCount++;
      }
    }
  }
  if(placed) { checkWin(); render(); }
  else document.getElementById('statusMsg').textContent = 'No auto-moves available.';
}

// ── WIN ───────────────────────────────────────────────────────────
function checkWin() {
  const total = Object.values(foundations).reduce((sum,f)=>sum+f.length,0);
  document.getElementById('placedCount').textContent = total;
  if(total===81) document.getElementById('winOverlay').classList.add('show');
}

// ── UNDO ─────────────────────────────────────────────────────────
function saveHistory() {
  historyStack.push({
    drawPile:JSON.parse(JSON.stringify(drawPile)),
    wastePile:JSON.parse(JSON.stringify(wastePile)),
    foundations:JSON.parse(JSON.stringify(foundations)),
    tableau:JSON.parse(JSON.stringify(tableau)),
    moveCount,
  });
  if(historyStack.length>30) historyStack.shift();
}
function undoAction() {
  if(!historyStack.length) return;
  const s=historyStack.pop();
  drawPile=s.drawPile;wastePile=s.wastePile;foundations=s.foundations;tableau=s.tableau;moveCount=s.moveCount;
  selected=null;
  document.getElementById('statusMsg').textContent='';
  render();
}

// ── RENDER ────────────────────────────────────────────────────────
function getSuit(id){ return SUITS.find(s=>s.id===id); }

function render() {
  // Draw pile
  const dp = document.getElementById('drawPile');
  dp.className = 'draw-pile-card'+(drawPile.length===0?' empty':'');
  dp.innerHTML = drawPile.length>0
    ? `<div class="dc-sym">✦</div><div class="dc-count">${drawPile.length}</div>`
    : `<div class="dc-sym" style="opacity:0.3">↺</div><div class="dc-count">reset</div>`;

  // Waste pile
  const wp = document.getElementById('wastePile');
  if(wastePile.length>0) {
    const card=wastePile[wastePile.length-1];
    const s=getSuit(card.suit);
    wp.className='waste-card'+(selected?.type==='waste'?' selected':'');
    wp.style.background=s.bg;wp.style.borderColor=s.border;wp.style.color=s.color;
    wp.innerHTML=`<div class="dc-sym">${s.sym}</div><div class="dc-rank">${card.rank} · ${RANKS[card.rank-1]}</div>`;
  } else {
    wp.className='waste-card empty';wp.style.background='';wp.style.borderColor='';wp.style.color='';
    wp.innerHTML='<span style="opacity:0.2">—</span>';
  }

  // Foundations
  const fEl=document.getElementById('foundations');fEl.innerHTML='';
  TIERS.forEach(tier=>{
    const tg=document.createElement('div');
    tg.className='tier-group';
    tg.style.background=tier.bg;tg.style.borderColor=tier.border;
    const tl=document.createElement('div');tl.className='tier-label';tl.style.color=tier.color;
    tl.textContent=`${tier.sym} ${tier.name} · Ranks ${tier.ranks[0]}–${tier.ranks[tier.ranks.length-1]}`;
    tg.appendChild(tl);
    const ts=document.createElement('div');ts.className='tier-slots';
    // Show suits whose tier matches
    SUITS.filter(s=>s.tier===tier.id).forEach(suit=>{
      const f=foundations[suit.id];
      const slot=document.createElement('div');
      slot.className='found-slot'+(f.length>0?' has-card':'');
      slot.style.borderColor=f.length>0?suit.border:'rgba(255,255,255,0.08)';
      slot.style.background=f.length>0?suit.bg:'transparent';
      slot.title=`${suit.name} foundation — click to place selected card`;
      if(f.length>0){
        const top=f[f.length-1];
        slot.innerHTML=`<div class="fs-sym" style="color:${suit.color}">${suit.sym}</div><div class="fs-rank" style="color:${suit.color}">${top.rank}</div>`;
      } else {
        slot.innerHTML=`<div class="fs-sym" style="color:rgba(255,255,255,0.2)">${suit.sym}</div>`;
      }
      slot.onclick=()=>placeOnFoundation(suit.id);
      ts.appendChild(slot);
    });
    tg.appendChild(ts);fEl.appendChild(tg);
  });

  // Move count
  document.getElementById('moveCount').textContent=moveCount;

  // Tableau
  const tabEl=document.getElementById('tableau');tabEl.innerHTML='';
  tableau.forEach((col,colIdx)=>{
    const colEl=document.createElement('div');colEl.className='column';
    const hdr=document.createElement('div');hdr.className='col-header';
    const s=SUITS[colIdx];hdr.innerHTML=`<span style="color:${s.color}">${s.sym}</span>`;
    colEl.appendChild(hdr);
    const colCards=document.createElement('div');colCards.className='col-cards';
    colCards.style.height=(88+Math.max(0,col.length-1)*22)+'px';

    if(col.length===0){
      const empty=document.createElement('div');empty.className='empty-col';
      empty.textContent=s.sym;empty.style.color=`rgba(${hexToRgb(s.color)},0.15)`;
      empty.onclick=()=>handleColumnClick(colIdx,0);
      colCards.appendChild(empty);
    } else {
      col.forEach((card,cardIdx)=>{
        const cardEl=document.createElement('div');
        const isSelected=selected?.type==='tableau'&&selected.col===colIdx&&selected.cardIdx===cardIdx;
        const cs=getSuit(card.suit);
        if(!card.faceUp){
          cardEl.className='card face-down';
        } else {
          cardEl.className='card'+(isSelected?' selected':'');
          cardEl.style.background=cs.bg;cardEl.style.borderColor=isSelected?`rgba(212,175,55,0.9)`:cs.border;cardEl.style.color=cs.color;
          cardEl.innerHTML=`<div class="c-sym">${cs.sym}</div><div class="c-rank">${card.rank}</div><div class="c-name">${RANKS[card.rank-1]}</div>`;
        }
        cardEl.style.top=(cardIdx*22)+'px';cardEl.style.zIndex=cardIdx+1;
        cardEl.onclick=()=>handleColumnClick(colIdx,cardIdx);
        colCards.appendChild(cardEl);
      });
    }
    colEl.appendChild(colCards);

    // Auto-place button at bottom
    const auto=document.createElement('div');
    auto.style.marginTop=(88+Math.max(0,col.length-1)*22+4)+'px';
    auto.style.textAlign='center';
    colEl.appendChild(colCards);tabEl.appendChild(colEl);
  });

  // Auto-place hint
  let autoBtn=document.getElementById('autoBtn');
  if(!autoBtn){
    autoBtn=document.createElement('button');autoBtn.id='autoBtn';
    autoBtn.style.cssText='position:fixed;bottom:1.5rem;right:1.5rem;padding:0.5rem 1.1rem;background:rgba(212,175,55,0.15);border:1.5px solid rgba(212,175,55,0.5);border-radius:20px;color:#fef3c7;font-size:0.8rem;font-weight:700;cursor:pointer;z-index:50;';
    autoBtn.textContent='Auto-Place ✦';autoBtn.onclick=autoPlace;
    document.body.appendChild(autoBtn);
  }
}

function hexToRgb(hex){
  const r=parseInt(hex.slice(1,3),16),g=parseInt(hex.slice(3,5),16),b=parseInt(hex.slice(5,7),16);
  return `${r},${g},${b}`;
}

newGame();
</script>
<script src="../nav-strip.js"></script>
</body>
</html>
